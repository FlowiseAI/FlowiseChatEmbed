<!--
  NOTE: This .html file (and public folder) is optional and can be safely deleted.
  It serves only as a demo/test page.
  
  The chatbot can be embedded directly on any allowed domain using the embed script that
  is generated when starting the server.
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowise Chatbot Widget</title>
</head>

<body>
    <div id="root"></div>
    <script type="module">
        import Chatbot from './web.js'
        Chatbot.initFull({
            chatflowid: 'a1b9a25d-81ee-48cd-822b-09ae2bd89725',    
            apiHost: 'https://flowise.tobeway.com:3000',
            chatflowConfig: {
                vars: {
                    mdmModule: 'META',
                    gptModel: 'gpt-4o-mini'
                }
            },
            theme: {
                button: {
                    backgroundColor: "#B5C2FF",
                    right: 20,
                    bottom: 20,
                    size: 48,
                    dragAndDrop: true,
                    iconColor: "#000000",
                    autoWindowOpen: {
                        autoOpen: true,
                        openDelay: 2,
                        autoOpenOnMobile: false
                    }
                },
                chatWindow: {
                    width: '700',
                    showTitle: true,
                    showAgentMessages: false,
                    title: "토비 AI",
                    titleAvatarSrc: "https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/svg/google-messages.svg",
                    welcomeMessage: "안녕하세요 <%=SessionUserName%>님! 필요한 정보나 궁금한 점이 있다면 말씀해주세요. 함께 해결해드리겠습니다.",
                    clearChatOnReload: false,
                    starterPrompts: ["MDM 업무규칙?"], 
                    botMessage: {
                        backgroundColor: "#E3F2FD",
                        backgroundColorEmphasize: "#DCF0FF",
                        showAvatar: true,
                        avatarSrc: "https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/parroticon.png"
                    },
                    userMessage: {
                        backgroundColor: "#DDE3FF",
                        textColor: '#474747'
                    },
                    textInput: {
                        placeholder: "질문을 입력하세요.",
                        backgroundColor: "#ffffff",
                        textColor: "#303235",
                        sendButtonColor: "#5473F9",
                        autoFocus: true,
                    },
                    footer: {
                        text: "",
                        company: ""
                    }
                }                
            },
            observersConfig: {
                // The bot message stack has changed
                observeMessages: (messages) => {
                    //console.log({ messages });
                },
                // Source link has clicked
                observeSourceClick: (source) => {
                    console.log(source);
                    if (source && source.metadata) {
                        //alert('PDF Viewer를 띄우겠습니다.' + source.metadata.solution + ' ' + source.metadata.solution + ' page');
                    }
                    //console.log(source.metadata.solution);
                }
            }         
        })
    </script>
    <div id="chatbot-container">
        <flowise-fullchatbot></flowise-fullchatbot>
    </div>
</body>

</html>